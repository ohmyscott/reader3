/* Base Styles */
@layer base {
  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    line-height: 1.6;
    color: #111827;
    background-color: #f9fafb;
  }

  /* Dark Mode Styles */
  body.bg-gray-900 {
    color: #f9fafb;
    background-color: #111827;
  }

  .dark .card {
    background-color: #1f2937;
    border-color: #374151;
  }

  .dark .modal-overlay {
    background-color: rgba(0, 0, 0, 0.7);
  }

  .dark .modal-content {
    background-color: #1f2937;
  }

  .dark .chat-dialog {
    background-color: #1f2937;
    border-color: #374151;
  }

  .dark .sidebar {
    background-color: #1f2937;
    border-color: #374151;
  }

  .dark .main-content {
    background-color: #111827;
  }
}

/* Component Styles */
@layer components {
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
  }

  .btn-primary {
    @apply btn bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500;
  }

  .btn-secondary {
    @apply btn bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-gray-500;
  }

  .btn-success {
    @apply btn bg-green-600 text-white hover:bg-green-700 focus:ring-green-500;
  }

  .card {
    @apply bg-white rounded-xl shadow-sm border border-gray-200;
  }

  .modal-overlay {
    position: fixed;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 50;
  }

  .modal-content {
    background-color: white;
    border-radius: 1rem;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    max-width: 32rem;
    width: 100%;
    margin-left: 1rem;
    margin-right: 1rem;
    max-height: 90vh;
    overflow: hidden;
  }
}

/* Loading Styles */
.loading-spinner {
  @apply inline-block w-4 h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin;
}

/* Reader Specific Styles */
.reader-container {
  @apply flex h-screen overflow-hidden font-serif;
}

.sidebar {
  @apply w-80 bg-white border-r border-gray-200 overflow-y-auto flex-shrink-0 flex flex-col;
}

.main-content {
  @apply flex-1 overflow-y-auto relative scroll-behavior-smooth bg-gray-50;
}

.content-wrapper {
  @apply max-w-4xl mx-auto py-16 px-8 text-lg leading-relaxed text-gray-900;
}

.book-content h1,
.book-content h2,
.book-content h3,
.book-content h4,
.book-content h5,
.book-content h6 {
  @apply font-sans font-semibold text-gray-900 mt-8 mb-4;
}

.book-content h1 { @apply text-3xl; }
.book-content h2 { @apply text-2xl; }
.book-content h3 { @apply text-xl; }

.book-content p {
  @apply mb-6 text-justify;
}

.book-content img {
  @apply max-w-full h-auto block my-8 mx-auto rounded-lg shadow-md;
}

.book-content ul,
.book-content ol {
  @apply mb-6 pl-8;
}

.book-content li {
  @apply mb-2;
}

.book-content blockquote {
  @apply border-l-4 border-gray-600 pl-6 my-6 italic text-gray-600;
}

.book-content a {
  @apply text-gray-600 hover:underline;
}

/* Chat Styles */
.chat-btn {
  @apply fixed bottom-8 right-8 w-16 h-16 bg-gray-600 text-white border-0 rounded-full cursor-pointer text-2xl flex items-center justify-center shadow-lg transition-all duration-300 hover:bg-gray-700 hover:scale-105 z-40;
}

.chat-btn.active {
  @apply bg-red-500;
}

.chat-dialog {
  @apply fixed bottom-24 right-8 w-[420px] h-[calc(100vh-10rem)] bg-white rounded-2xl shadow-2xl flex flex-col z-39 overflow-hidden max-w-[calc(100vw-4rem)] hidden;
}

.chat-dialog.open {
  @apply block;
}

.chat-header {
  @apply bg-gradient-to-r from-gray-600 to-gray-700 text-white p-4 flex justify-between items-center font-semibold;
}

.chat-messages {
  @apply flex-1 p-4 overflow-y-auto text-sm leading-relaxed min-h-0;
}

.message {
  @apply mb-4;
}

.message.user {
  @apply text-right;
}

.message.assistant {
  @apply text-left;
}

.message-bubble {
  @apply inline-block max-w-[85%] p-3 rounded-2xl word-wrap break-keep relative;
}

.message.user .message-bubble {
  @apply bg-gray-700 text-white rounded-br-lg;
}

.message.assistant .message-bubble {
  @apply bg-gray-100 text-gray-900 border border-gray-300 rounded-bl-lg;
}

/* Responsive Design */
@media (max-width: 768px) {
  .reader-container {
    @apply flex-col;
  }

  .sidebar {
    @apply w-full h-[50vh] border-r-0 border-b border-gray-200;
  }

  .main-content {
    @apply h-[50vh];
  }

  .content-wrapper {
    @apply py-12 px-4 text-base;
  }

  .chat-dialog {
    @apply w-[calc(100vw-2rem)] right-4;
    bottom-20;
    height: [calc(100vh-8rem)];
  }
}

@media (max-width: 480px) {
  .content-wrapper {
    @apply py-8 px-3;
  }

  .chat-dialog {
    @apply w-[calc(100vw-1rem)] right-2;
  }
}